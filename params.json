{"name":"PDO4You","tagline":"PDO4You is a class that implements the Singleton design pattern for connecting the database using the PDO extension (PHP Data Objects)","body":"*[Leia a documenta&ccedil;&atilde;o em Portugu&ecirc;s](https://github.com/giovanniramos/PDO4You/blob/master/README-pt.md)*\r\n\r\n---\r\n\r\nPDO4You\r\n==================================================\r\n\r\nThis class is based on the PDO, which is a PHP extension that allows developers to create portable code, so as to cater for most popular databases.\r\nBeing MySQL, PostgreSQL, SQLite, Oracle, Microsoft SQL Server, Sybase.\r\n\r\nAlternatively been added in version 3.0 support for the MariaDB database.\r\nMariaDB is being considered as the future replacement free of MySQL.\r\nMore information at: http://bit.ly/MARIADB\r\n\r\nAnd since version 2.6 also has provided support for the CUBRID database.\r\nA management system database highly optimized for Web applications.\r\nMore information at: http://bit.ly/CUBRID\r\n\r\nThe PDO4You provides an abstraction layer for data access, that regardless of which database you're using, you can always use the same methods to issue queries and fetch data.\r\n\r\nThe Singleton design pattern was adopted to optimize the connection, ensuring a single instance of the connection object.\r\n\r\n\r\n**Advantages in their use:**\r\n* Instruction SQL compact using JSON notation\r\n* Abstraction of connection\r\n* Protection against SQL Injection\r\n* Multiple database connections\r\n* Methods/Commands CRUD predefined\r\n* Option to connect with VCAP_SERVICES\r\n* Error Handling with Stack Trace\r\n\r\n\r\n\r\nGetting Started\r\n--------------------------------------------------\r\n\r\nThe bootstrap file is responsible for loading the autoloader and all project dependencies.\r\nIf not available, you will receive a confirmation message to start installation with Composer.\r\n\r\n~~~ php\r\n<?php\r\n\r\n// Loads the autoloader and all project dependencies\r\nrequire __DIR__.'/bootstrap.php';\r\n\r\n?>\r\n~~~ \r\n\r\n`PDO4You.php`: class that contains the implementation of the PDO object connection.\r\n\r\n`PDO4You.config.php`: initial configuration file, server access and database.\r\n\r\n`PDO4You.settings.ini`: contains the settings for each adapter of connection to the database.\r\n\r\n`Describe.php`: Describe is a class used to list all the fields in a table and the data format of each field.\r\n\r\n`Pagination.php`: Pagination is a class that allows you to list the records so as paged, similar to Google.\r\n\r\n\r\n\r\nEstablishing a connection to the database\r\n--------------------------------------------------\r\n\r\nTo abstract our data access mechanisms, we use a DSN (Data Source Name = Data Source) that stores the information needed to initiate communication with other data sources, such as: type of technology, server name or location, database name, user, password, and other settings. This allows portability of the project, facilitating the exchange of access to the database during a migration.\r\n\r\n~~~ php\r\n<?php\r\n\r\n// Load all the files needed\r\nrequire __DIR__.'/bootstrap.php';\r\n\r\n// Connection instance imported and available for use\r\nuse PDO4You\\PDO4You;\r\nnew PDO4You;\r\n\r\n\r\n// Main ways to start a connection instance\r\n\r\n# DEFAULT \r\nPDO4You::getInstance(); // The data access have been defined in the initial configuration\r\n\r\n\r\n// Connecting to other data sources through a DSN\r\n\r\n# MySQL / MariaDB\r\nPDO4You::getInstance('instance_name', 'mysql:host=localhost;dbname=pdo4you;port=3306', 'user', 'pass');\r\n\r\n# PostgreSQL\r\nPDO4You::getInstance('instance_name', 'pgsql:host=localhost;dbname=pdo4you;port=5432', 'user', 'pass');\r\n\r\n# CUBRID\r\nPDO4You::getInstance('instance_name', 'cubrid:host=localhost;dbname=pdo4you;port=33000', 'user', 'pass');\r\n\r\n?>\r\n~~~ \r\n\r\n\r\n\r\nPerforming CRUD operations on your database\r\n--------------------------------------------------\r\n\r\nThe term CRUD refers to the 4 basic operations in a database and meaning:\r\nCreate(INSERT), Retrieve(SELECT), Update(UPDATE) e Destroy(DELETE)\r\n\r\nQuery statements:\r\n\r\n`PDO4You::select()`: returns an array indexed by column name.\r\n\r\n`PDO4You::selectNum()`: returns an array indexed by the numerical position of the column.\r\n\r\n`PDO4You::selectObj()`: returns an object with column names as properties.\r\n\r\n`PDO4You::selectAll()`: returns an array indexed by name and numerical position of the column.\r\n\r\n\r\nBelow are examples of how to perform these operations.\r\n\r\n\r\n\r\nSelecting records in the database\r\n--------------------------------------------------\r\n\r\n~~~ php\r\n<?php\r\n\r\n// Load all the files needed\r\nrequire __DIR__.'/bootstrap.php';\r\n\r\n// Connection instance imported and available for use\r\nuse PDO4You\\PDO4You;\r\nnew PDO4You;\r\n\r\n// Starting a connection instance. The default connection is not persistent\r\nPDO4You::getInstance();\r\n\r\n// Defining a persistent communication with the database\r\nPDO4You::setPersistent(true);\r\n\r\n// Selecting records in the database\r\nPDO4You::select('SELECT * FROM books LIMIT 2');\r\n\r\n// Selecting records and setting that connection instance will be used\r\nPDO4You::select('SELECT * FROM books LIMIT 2', 'instance_name');\r\n\r\n\r\n// Query statement\r\n$sql = 'SELECT * FROM books LIMIT 2';\r\n\r\n// Selecting records with PDO::FETCH_ASSOC\r\n$result = PDO4You::select($sql);\r\n\r\n// Selecting records with PDO::FETCH_NUM\r\n$result = PDO4You::selectNum($sql);\r\n\r\n// Selecting records with PDO::FETCH_OBJ\r\n$result = PDO4You::selectObj($sql);\r\n\r\n// Selecting records with PDO::FETCH_BOTH\r\n$result = PDO4You::selectAll($sql);\r\n\r\n\r\n// Selecting all records\r\n$result = PDO4You::select('SELECT * FROM books');\r\n\r\n// Getting the total number of rows affected by the operation\r\n$total = PDO4You::rowCount();\r\n\r\n// Displaying the query results\r\necho '<pre><h3>Query Result:</h3> ' , print_r($result, true) , '</pre>';\r\n\r\n?>\r\n~~~ \r\n\r\n\r\n\r\nThe methods insert(), update() and delete() of the PDO4You class, are nestled between transactions, these being beginTransaction() and commit(). This ensures that the system can roll back an unsuccessful operation and all changes made ​​since the start of a transaction.\r\n\r\nWas added in version 3.1 the execute() method, as an alternative to methods (insert, update and delete).\r\n\r\nA serious error in the execution results in invoke rollBack(), undoing the whole operation. Consequently one Exception is thrown, tracing the path of all classes and methods involved in the operation, speeding in an environment of \"production\", the debug process and thus ensuring the database of the risk becoming unstable.\r\n\r\nIn MySQL, transaction support is available for InnoDB type tables.\r\n\r\nThe SQL statements of the PDO4You class (insert, update and delete) are now using JSON notation, a new format to write queries which in turn has conventions very similar to languages ​​like Python, Ruby, C++, Java, JavaScript. The new syntax adopted by the class is much more beautiful and concise, than the used by Arrays. Besides compact, instructions are capable of operating simultaneously in different tables in the same database.\r\n\r\n\r\nBelow are excerpts from example in practice.\r\n\r\n\r\n\r\nInserting a single row in the database\r\n--------------------------------------------------\r\n\r\n~~~ php\r\n<?php\r\n\r\n// SQL insert in JSON format\r\n$json = '\r\n\tinsert : [\r\n\t\t{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\tvalues: { mail: \"pdo4you@gmail.com\" }\r\n\t\t}\r\n\t] \r\n';\r\n\r\n// The $result variable stores as return of the method, an array with the number of rows affected by the insert operation\r\n$result = PDO4You::execute($json);\r\n\r\n// Just after insertion, use the method PDO4You::lastId() to get the ID of the last insert operation in the database\r\n$lastInsertId = PDO4You::lastId();\r\n\r\n// If needed, enter the name of the sequence variable, required in some databases\r\n$lastInsertId = PDO4You::lastId('table_id_seq');\r\n\r\n?>\r\n~~~ \r\n\r\n\r\n\r\nInserting multiple records\r\n--------------------------------------------------\r\n\r\n~~~ php\r\n<?php\r\n\r\n// SQL insert in JSON format\r\n$json = '\r\n\tinsert : [\r\n\t\t{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\tvalues: { mail: \"mail_1@domain.com\" }\r\n\t\t},{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\tvalues: { mail: \"mail_2@domain.com\" }\r\n\t\t},{\r\n\t\t\ttable: \"books\" ,\r\n\t\t\tvalues: { title: \"title\", author: \"author\" }\r\n\t\t}\r\n\t] \r\n';\r\n\r\n// The $result variable stores an array with the number of rows affected by the insert operation\r\n$result = PDO4You::execute($json);\r\n\r\n?>\r\n~~~ \r\n\r\n\r\n\r\nUpdating multiple records\r\n--------------------------------------------------\r\n\r\n~~~ php\r\n<?php\r\n\r\n// SQL update in JSON format\r\n$json = '\r\n\tupdate : [\r\n\t\t{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\tvalues: { mail: \"mail_1@domain.com\" } ,\r\n\t\t\twhere: { id: 2 }\r\n\t\t},{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\tvalues: { mail: \"mail_2@domain.com\" } ,\r\n\t\t\twhere: { id: 3 }\r\n\t\t},{\r\n\t\t\ttable: \"books\" ,\r\n\t\t\tvalues: { title: \"new-title\", author: \"new-author\" } ,\r\n\t\t\twhere: { id: 1 }\r\n\t\t}\r\n\t] \r\n';\r\n\r\n// The $result variable stores an array with the number of rows affected by the update operation\r\n$result = PDO4You::execute($json);\r\n\r\n?>\r\n~~~ \r\n\r\n\r\n\r\nDeleting multiple records\r\n--------------------------------------------------\r\n\r\n~~~ php\r\n<?php\r\n\r\n// SQL delete in JSON format\r\n$json = '\r\n\tdelete : [\r\n\t\t{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\twhere: { id: 2 }\r\n\t\t},{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\twhere: { id: 5 }\r\n\t\t},{\r\n\t\t\ttable: \"users\" ,\r\n\t\t\twhere: { id: 10 }\r\n\t\t},{\r\n\t\t\ttable: \"books\" ,\r\n\t\t\twhere: { id: 10 }\r\n\t\t}\r\n\t] \r\n';\r\n\r\n// The $result variable stores an array with the number of rows affected by the delete operation\r\n$result = PDO4You::execute($json);\r\n\r\n?>\r\n~~~ \r\n\r\n\r\n\r\nDrivers supported by the server\r\n--------------------------------------------------\r\n\r\nExecute the method below to check if the server supports a PDO driver specific to your database.\r\nSupported drivers will be displayed on the screen.\r\n\r\n~~~ php\r\n<?php\r\n\r\n// The method below shows all the drivers installed and that are supported by the server\r\nPDO4You::getAvailableDrivers();\r\n\r\n?>\r\n~~~\r\n\r\nTo enable any driver not installed, locate the php.ini file, open it and look for \"extension=\" without quotes, then uncomment the following lines according to your database preferably, removing the beginning of each line the \"semicolon\" and after changes, restart the server.\r\n\r\n~~~ html\r\n;extension=php_pdo.dll                  ; This DLL is not required as of PHP 5.3\r\nextension=php_pdo_mysql.dll             ; MySQL 3.x/4.x/5.x / MariaDB\r\nextension=php_pdo_pgsql.dll             ; PostgreSQL\r\n;extension=php_pdo_cubrid.dll           ; CUBRID\r\n;extension=php_pdo_oci.dll              ; Oracle Call Interface\r\n;extension=php_pdo_sqlsrv.dll           ; Microsoft SQL Server / SQL Azure\r\n;extension=php_pdo_dblib.dll            ; Microsoft SQL Server / Sybase / FreeTDS\r\n;extension=php_pdo_mssql.dll            ; Microsoft SQL Server \"Old version\"\r\n;extension=php_pdo_sqlite.dll           ; SQLite 2/3\r\n\r\n~~~\r\n\r\nPDO drivers for the server Xampp:<br />\r\nCUBRID (PHP 5.4): http://bit.ly/PDO_CUBRID-PHP54<br />\r\nCUBRID (PHP 5.3): http://bit.ly/PDO_CUBRID-PHP53<br />\r\nMS SQL Server 3.0 (PHP 5.4): http://bit.ly/PDO_SQLSRV-PHP54<br />\r\nMS SQL Server 2.0 (PHP 5.2/5.3): http://bit.ly/PDO_SQLSRV-PHP53<br />\r\nMS SQL Server (Old version): http://bit.ly/PDO_MSSQL-PHP53\r\n\r\n\r\n\r\nDependencies\r\n--------------------------------------------------\r\n\r\nPHP >= 5.3.2\r\n\r\n\r\n\r\nCollaborators\r\n--------------------------------------------------\r\n\r\nGiovanni Ramos - <giovannilauro@gmail.com> - <http://twitter.com/giovanni_ramos><br />\r\nSee also the list of [colaboradores](http://github.com/giovanniramos/PDO4You/contributors) who participated in this project.\r\n\r\n\r\n\r\nLicense\r\n--------------------------------------------------\r\n\r\nCopyright (c) 2010-2013 [Giovanni Ramos](http://github.com/giovanniramos)\r\n\r\nPDO4You is open-sourced software licensed under the [MIT License](http://www.opensource.org/licenses/MIT)","google":"UA-5376735-7","note":"Don't delete this file! It's used internally to help with page regeneration."}